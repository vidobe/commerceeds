{"version":3,"file":"vcomponent.js","sources":["../../src/lib/form-values.ts","../../src/lib/classes.ts","../../../../node_modules/deepmerge/dist/cjs.js","../../src/lib/debounce.ts","../../src/lib/resolve-image.ts","../../src/lib/vcomponent.tsx"],"sourcesContent":["export const getFormValues = (form: HTMLFormElement) => {\n  const formData: any = new FormData(form);\n  const result = Object.fromEntries(formData);\n  return result;\n};\n\nexport const getFormErrors = (form: HTMLFormElement) => {\n  const formData: any = new FormData(form);\n\n  const data = Object.fromEntries(formData);\n\n  const result = Object.entries(data).reduce((result, [key]) => {\n    // @ts-ignore\n    const field = form.elements[key];\n\n    return field?.validationMessage\n      ? { ...result, [key]: field.validationMessage }\n      : { ...result };\n  }, {});\n\n  return result;\n};\n","// @ts-ignore\nimport { JSXInternal } from 'preact/src/jsx';\n\ntype ClassName = string | JSXInternal.SignalLike<string | undefined>;\n\nexport const classes = (\n  classes: Array<ClassName | [ClassName, boolean] | undefined>\n) => {\n  const result = classes.reduce((result, item) => {\n    if (!item) return result;\n\n    if (typeof item === 'string') result += ` ${item}`;\n\n    if (Array.isArray(item)) {\n      const [className, isActive] = item;\n      if (className && isActive) {\n        result += ` ${className}`;\n      }\n    }\n\n    return result;\n  }, '') as string;\n\n  return result.trim();\n};\n","'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction getEnumerableOwnPropertySymbols(target) {\n\treturn Object.getOwnPropertySymbols\n\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\treturn Object.propertyIsEnumerable.call(target, symbol)\n\t\t})\n\t\t: []\n}\n\nfunction getKeys(target) {\n\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n}\n\nfunction propertyIsOnObject(object, property) {\n\ttry {\n\t\treturn property in object\n\t} catch(_) {\n\t\treturn false\n\t}\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n\treturn propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n\t\t&& !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n\t\t\t&& Object.propertyIsEnumerable.call(target, key)) // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tgetKeys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tgetKeys(source).forEach(function(key) {\n\t\tif (propertyIsUnsafe(target, key)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\t// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n\t// implementations can use it. The caller may not replace it.\n\toptions.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n","export const debounce = (fn: Function, ms: number) => {\n  let timeoutId: ReturnType<typeof setTimeout>;\n  return function (this: any, ...args: any[]) {\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(() => fn.apply(this, args), ms);\n  };\n};\n","import { getImageParamsKeyMap } from '@adobe/elsie/lib/';\n\nconst BREAKPOINTS = {\n  medium: 768,\n  large: 1024,\n  xlarge: 1366,\n  xxlarge: 1920,\n};\n\nexport interface ResolveImageUrlOptions {\n  width: number;\n  height?: number;\n  auto?: string;\n  quality?: number;\n  crop?: boolean;\n  fit?: string;\n}\n\nconst resolveImageUrl = (url: string, _opts?: ResolveImageUrlOptions) => {\n  const [base, query] = url.split('?');\n  const params = new URLSearchParams(query);\n\n  const keyMapping = getImageParamsKeyMap();\n\n  let opts = {};\n\n  if (keyMapping && Object.keys(keyMapping).length > 0 && _opts) {\n    opts = Object.entries(_opts).reduce((acc, [key, value]) => {\n      const newKey = keyMapping[key];\n      if (newKey) {\n        acc[newKey] = value;\n      }\n      return acc;\n    }, {} as { [key: string]: any });\n  } else {\n    opts = {\n      auto: 'webp',\n      quality: 80,\n      crop: false,\n      fit: 'cover',\n      ..._opts,\n    };\n  }\n  // Append image optimization parameters\n  Object.entries(opts).forEach(([key, value]) => {\n    if (value !== undefined && value !== null) {\n      params.set(key, String(value));\n    }\n  });\n\n  return `${base}?${params.toString()}`;\n};\n\nexport const generateSrcset = (\n  imageURL: string,\n  options: ResolveImageUrlOptions\n) => {\n  if (!imageURL || !options?.width) return;\n\n  const generateSrcsetUrl = (options: ResolveImageUrlOptions) => {\n    return resolveImageUrl(imageURL, {\n      ...options,\n    });\n  };\n\n  return Object.entries(BREAKPOINTS)\n    .map(([, value]) => {\n      // calculate breakpoints width\n      const relativeWidth = (options.width * value) / BREAKPOINTS.xxlarge;\n\n      return `${generateSrcsetUrl({\n        ...options,\n        width: relativeWidth,\n      })} ${value}w`;\n    })\n    .join(',\\n');\n};\n","/*\nADOBE CONFIDENTIAL\nCopyright 2023 Adobe\nAll Rights Reserved.\nNOTICE: All information contained herein is, and remains\nthe property of Adobe and its suppliers, if any. The intellectual\nand technical concepts contained herein are proprietary to Adobe\nand its suppliers and are protected by all applicable intellectual\nproperty laws, including trade secret and copyright laws.\nDissemination of this information or reproduction of this material\nis strictly forbidden unless prior written permission is obtained\nfrom Adobe.\n*/\n\nimport { VNode, ComponentChildren } from 'preact';\nimport { classes } from '.';\n\nexport type VComponentProps = {\n  node: VNode | VNode[];\n  children?: ComponentChildren;\n  [key: string]: any; // allow other unspecified props to be passed without any TS warning\n};\n\nexport function VComponent({ node, ...props }: VComponentProps) {\n  if (!node) return null;\n\n  if (Array.isArray(node)) {\n    return (\n      <>\n        {node.map((n, key) => (\n          <VComponent\n            key={key}\n            node={n}\n            className={props.className}\n            {...props}\n          />\n        ))}\n      </>\n    );\n  }\n\n  // @ts-ignore\n  props.className = classes([node.props.className, props.className]);\n\n  // @ts-ignore\n  return <node.type ref={node.ref} key={node.key} {...node.props} {...props} />;\n}\n"],"names":["getFormValues","form","formData","FormData","result","Object","fromEntries","getFormErrors","data","entries","reduce","key","field","elements","validationMessage","classes","item","Array","isArray","className","isActive","trim","isMergeableObject","value","isNonNullObject","isSpecial","stringValue","isReactElement","canUseSymbol","REACT_ELEMENT_TYPE","emptyTarget","val","cloneUnlessOtherwiseSpecified","options","deepmerge","defaultArrayMerge","target","source","element","getMergeFunction","customMerge","getEnumerableOwnPropertySymbols","symbol","getKeys","propertyIsOnObject","object","property","propertyIsUnsafe","mergeObject","destination","sourceIsArray","targetIsArray","sourceAndTargetTypesMatch","array","prev","next","deepmerge_1","cjs","debounce","fn","ms","timeoutId","args","clearTimeout","setTimeout","apply","BREAKPOINTS","medium","large","xlarge","xxlarge","resolveImageUrl","url","_opts","base","query","split","params","URLSearchParams","keyMapping","getImageParamsKeyMap","opts","keys","length","acc","newKey","auto","quality","crop","fit","forEach","set","String","toString","generateSrcset","imageURL","width","generateSrcsetUrl","map","relativeWidth","join","VComponent","node","props","_jsx","_Fragment","children","n","type","ref"],"mappings":"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","x_google_ignoreList":[2]}